function topslide(b){this.target=b.target;this.cell=$(this.target+" .cell");this.slideNum=$(this.target+" .slideNum span");this.delay=b.delay||300;this.slideDelay=b.slideDelay||3000;this.slideTrans=b.slideTrans||3000;this.controller=b.controller||false;this.controllerFix=b.controllerFix||false;this.effect=b.effect||"blink";this.timeCycle=null;this.timeMsi=null}topslide.prototype.init=function(){var b=this;if(b.cell.length<2){$(this.target+" .slideNum").css("display","none");return false}if(this.controller){$('<div class="arNav"><div class="w1004"></div></div>').appendTo(this.target);$('<a href="#" class="leftAr" ></a><a href="#" class="rightAr" ></a>').appendTo($(this.target+" .arNav .w1004"));b.slideNum.html(" ");for(var c=0;c<b.cell.length;c++){b.slideNum.append("<i></i>")}this.alli=$(this.target+" .slideNum i");$(this.target).hover(function(){$(b.target+" .leftAr").fadeIn();$(b.target+" .rightAr").fadeIn()},function(){$(b.target+" .leftAr").fadeOut();$(b.target+" .rightAr").fadeOut()});$(this.target+" .leftAr").click(function(a){a.preventDefault();clearInterval(b.timeCycle);b.showCell(b.curIndex()<1?b.curIndex()+$(".slideNum i").length-1:b.curIndex()-1);b.cycleSlide()});$(this.target+" .rightAr").click(function(a){a.preventDefault();clearInterval(b.timeCycle);b.showCell(b.curIndex()>$(".slideNum i").length-2?0:b.curIndex()+1);b.cycleSlide()});$(window).resize(function(){b.showcontroll()})}this.alli.hover(function(){clearInterval(b.timeCycle);var d=$(this);var a=d.prevAll("i").length;if(!d.hasClass("cur")){b.timeMsi=setTimeout(function(){b.showCell(a)},b.delay)}},function(){b.cycleSlide();clearTimeout(b.timeMsi)});this.cell.hover(function(){b.cell.stop(true,true);clearInterval(b.timeCycle);var d=$(this);var a=d.prevAll(".cell").length;if(!d.hasClass("cur")){b.timeMsi=setTimeout(function(){b.showCell(a)},b.delay)}},function(){b.cycleSlide();clearTimeout(b.timeMsi)});b.showcontroll();b.cycleSlide()};topslide.prototype.showCell=function(p){var m=this;var l=m.alli.eq(p);var k=m.cell.eq(p);if(m.cell.filter(".easing").length>0){var o=m.cell.filter(".easing")}else{var o=m.cell.filter(".cur")}k.find("img").each(function(){if($(this).attr("original")){$(this).attr("src",$(this).attr("original"));$(this).removeAttr("original")}});if(k.find(".prom").length>0){k.find(".prom").each(function(){if($(this).attr("original")){$(this).css({"background-image":"url("+$(this).attr("original")+")"});$(this).removeAttr("original")}})}m.cell.removeClass("cur").stop().clearQueue().removeClass("easing").removeAttr("style");m.alli.removeClass("cur");m.alli.each(function(){if($(this).hasClass("new")){$(this).removeClass("newcur")}});l.addClass("cur");if(l.hasClass("new")){l.addClass("newcur")}switch(m.effect){case"blink":m.cell.removeClass("cur").removeAttr("style");o.hide();k.show();break;case"fade":o.css({display:"block"}).animate({opacity:0},m.slideTrans,function(){m.cell.removeClass("easing").removeAttr("style")});k.addClass("easing");k.css({display:"block",opacity:0}).animate({opacity:1},m.slideTrans,function(){k.addClass("cur").removeClass("easing").removeAttr("style")});break;case"slide":var i=m.cell.parent();var n=m.cell.width();var j=m.cell.length()*n;i.css({width:j});i.animate({left:n*p});break;default:o.hide();k.show()}return this};topslide.prototype.curIndex=function(){return $(this.target+" .slideNum .cur").prevAll("i").length};topslide.prototype.cycleSlide=function(){var c=this;setCycle=true;var d;c.timeCycle=setInterval(function(){if(c.curIndex()<(c.alli.length-1)){d=c.curIndex()+1}else{d=0}c.showCell(d)},c.slideDelay);return this};topslide.prototype.showcontroll=function(){if(!this.controllerFix){if($(window).width()>1680){$(this.target+" .leftAr").show();$(this.target+" .rightAr").show()}else{$(this.target+" .leftAr").hide();$(this.target+" .rightAr").hide()}}return this};var t=new topslide({target:"#mainSlide",slideDelay:4000,slideTrans:1000,controller:true,controllerFix:true,effect:"fade"});t.init();