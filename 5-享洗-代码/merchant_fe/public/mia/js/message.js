$(document).ready(function(){$(".msgCenter .splist .tabs span").click(function(a){});$(".sa_c,.sa_m").click(function(a){var c=$(this);var b=c.closest(".icspblock");if(c.attr("checked")=="checked"||c.attr("checked")==true){b.find(".oneMessage").attr("checked","checked");b.find(".vam").attr("checked","checked")}else{b.find(".oneMessage").attr("checked",false);b.find(".vam").attr("checked",false)}});$("#mymyMessageList .oneMessage").click(function(a){$(".sa_m").attr("checked",$("#myMessageList .oneMessage").length==$("#myMessageList .oneMessage:checked").length?true:false)});$("#myCommentList .oneMessage").click(function(a){$(".sa_c").attr("checked",$("#myCommentList .oneMessage").length==$("#myCommentList .oneMessage:checked").length?true:false)});$("#myMessageList .messageDelete").confirm({msg:"确定要删除此站内消息？",onOK:function(c){var b=$(c.target);var a=[];a[0]=b.data("id");var d={target:c,id:a};deleteMessages(d)},onCancel:function(){}});$("#myCommentList .commentDelete").confirm({msg:"确定要移除此评论消息？",onOK:function(c){var b=$(c.target);var a=[];a[0]=b.data("id");var d={target:c,id:a};deleteComments(d)},onCancel:function(){}});$(".messageDeleteAll").confirm({msg:"确定要删除此所选系统消息？",onOK:function(b){var a=[];var d=$(this);$("#myMessageList").find("input.oneMessage").each(function(){a.push($(this).val())});var c={target:b,id:a};deleteMessages(c)},onCancel:function(){}});$(".commentDeleteAll").confirm({msg:"确定要删除此所选系统消息？",onOK:function(b){var a=[];var d=$(this);$("#myCommentList").find("input.oneMessage").each(function(){a.push($(this).val())});var c={target:b,id:a};deleteComments(c)},onCancel:function(){}})});function deleteMessages(a){$.ajax({url:"/instant/message/deleteMessages",type:"POST",dataType:"json",data:{id:a.id},success:function(e){if(e.code==1){var d=$("#myMessageList");for(var c=0;c<a.id.length;c++){var b=d.find("input[value="+a.id[c]+"]").closest("tr");b.remove()}if(d.find("tr").length<=2){d.empty().text("当前没有系统通知")}}else{if(e.code==-1){var f=encodeURIComponent(window.location.href);window.location.href="/login?url="+f}else{alert(e.msg)}}}})}function deleteComments(a){$.ajax({url:"/instant/message/deleteComments",type:"POST",dataType:"json",data:{id:a.id},success:function(e){if(e.code==1){var d=$("#myCommentList");for(var c=0;c<a.id.length;c++){var b=d.find("input[value="+a.id[c]+"]").closest("tr");b.remove()}if(d.find("tr").length<=2){d.empty().text("当前没有评论通知")}}else{if(e.code==-1){var f=encodeURIComponent(window.location.href);window.location.href="/login?url="+f}else{alert(e.msg)}}}})};