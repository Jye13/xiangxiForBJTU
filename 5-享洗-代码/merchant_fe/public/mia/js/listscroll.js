var ListScroll=function(a){this._init(a);if(this.box&&this.len&&this.width){this._setHTML()}};ListScroll.prototype={_init:function(a){this.options={box:null,len:0,width:0,duration:500,btnpre:null,btnnext:null,isLoop:false,isInterval:false,intervalTime:4000};this.options=jQuery.extend(this.options,a||{});this.box=this.options.box;this.len=this.options.len;this.width=this.options.width;this.boxWidth=this.len*this.width;this.duration=this.options.duration;this.btnpre=this.options.btnpre;this.btnnext=this.options.btnnext;this.isLoop=this.options.isLoop;this.isInterval=this.options.isInterval;this.intervalTime=this.options.intervalTime;this.left=0;this.maxLeft=0;this.lock=false},_setHTML:function(){var e=this.box,a=this.len,c=this.width;var b=e.children("li");if(b.length>a){if(this.isLoop){var d=b.detach().slice(b.length-a).clone(),f=b.slice(0,a).clone();this.maxLeft=(b.length+a)*c;this.preLeft=a*c;this.left=e.position().left-this.preLeft;e.append(b).prepend(d).append(f).css("left",this.left)}else{this.maxLeft=(Math.ceil(b.length/a)-1)*a*c;e.css("left",this.left)}this._bind()}else{this.btnpre.hide();this.btnnext.hide()}},_toPre:function(){var a=this;if(this.isLoop){this.lock=true;this.left=this.left+this.boxWidth;if(this.left<-this.preLeft){this.box.animate({left:this.left},this.duration,"",function(){a.lock=false})}else{this.box.animate({left:this.left},this.duration,"",function(){a.left=a.left-a.maxLeft+a.preLeft;a.box.css("left",a.left);a.lock=false})}}else{if(this.left!==0){this.lock=true;this.left=this.left+this.boxWidth;this.box.animate({left:this.left},this.duration,"",function(){a.lock=false})}}},_toNext:function(){var a=this;if(this.isLoop){this.lock=true;this.left=this.left-this.boxWidth;if(this.left>-this.maxLeft+this.preLeft){this.box.animate({left:this.left},this.duration,"",function(){a.lock=false})}else{this.box.animate({left:this.left},this.duration,"",function(){a.left=a.left+a.maxLeft-a.preLeft;a.box.css("left",a.left);a.lock=false})}}else{if(this.left!==-this.maxLeft){this.lock=true;this.left=this.left-this.boxWidth;this.box.animate({left:this.left},this.duration,"",function(){a.lock=false})}}},_bind:function(){var a=this;this.btnpre.click(function(){if(!a.lock){a._toPre()}return false});this.btnnext.click(function(){if(!a.lock){a._toNext()}return false});if(this.isLoop&&this.isInterval){this.timer=setInterval(function(){a._toNext.call(a)},a.intervalTime);this.box.add(this.btnpre).add(this.btnnext).hover(function(){clearInterval(a.timer)},function(){a.timer=setInterval(function(){a._toNext.call(a)},a.intervalTime)})}}};$(function(){var b=new ListScroll({box:$("#scrollul_1"),len:3,width:280,btnpre:$("#top_pre_1"),btnnext:$("#top_next_1")});var a=new ListScroll({box:$("#scrollul_2"),len:3,width:280,btnpre:$("#top_pre_2"),btnnext:$("#top_next_2"),isLoop:true,isInterval:true,intervalTime:2000})});